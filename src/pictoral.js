import Highcharts from 'highcharts/highstock';
import Exporting from 'highcharts/modules/exporting';
import Pictorial from 'highcharts/modules/pictorial';

Exporting(Highcharts);
Pictorial(Highcharts);

looker.plugins.visualizations.add({
    id: "pictorial_person_chart",
    "options": {
        "title": {
            "type": "string",
            "label": "Chart Title",
            "section": "Style",
            "default": ""
        },
        "image": {
            "default": "Person",
            "display": "select",
            "label": "Select Background Image",
            "section": "Style",
            "type": "string",
            "values": [
                {
                    "Person": 'm 656.59433,740.097 c -0.634,-1.435 -13.566,' +
                        '-15.425 -33.487,-23.292 -4.568,-1.94 -4.545,2.705 ' +
                        '-16.944,-34.925 -26.957,-72.647 -5.661,-112.736 -51.135,' +
                        '-200.791 -6.888,-14.322 -9.901,-24.921 -16.16,-50.12 ' +
                        '-25.397,-104.478 -6.032,-90.98 -15.87,-135.251 -17.961,' +
                        '-63.049 -50.754,-59.498 -71.782,-59.155 -16.944,0.378 ' +
                        '-45.224,-11.699 -52.936,-19.746 -10.555,-11.486 -17.912,' +
                        '-20.548 -11.679,-58.855 0,0 7.037,-12.141 9.078,-34.125 ' +
                        '9.284,11.287 24.572,-33.84 16.065,-42.691 -1.745,-1.867 ' +
                        '-5.169,-1.236 -6.289,1.015 -1.292,1.484 -1.315,3.695 ' +
                        '-2.888,4.964 -2,-9.359 3.289,-28.498 -7.935,-56.968 ' +
                        '-5.541,-12.289 -11.235,-15.496 -21.547,-22.44 -8.401,' +
                        '-6.048 -28.842,-7.595 -29.842,-7.717 h -9.461 c -1,' +
                        '0.122 -21.441,1.669 -29.842,7.717 -10.312,6.944 -16.006,' +
                        '10.151 -21.547,22.44 -11.224,28.47 -5.935,47.609 -7.935,' +
                        '56.968 -1.573,-1.269 -1.596,-3.48 -2.888,-4.964 -1.12,' +
                        '-2.251 -4.544,-2.882 -6.289,-1.015 -8.507,8.851 6.781,' +
                        '53.978 16.065,42.691 2.041,21.984 9.078,34.125 9.078,' +
                        '34.125 6.233,38.307 -1.124,47.369 -11.679,58.855 -7.712,' +
                        '8.047 -35.992,20.124 -52.935,19.746 -21.029,-0.343 ' +
                        '-53.822,-3.894 -71.782,59.155 -9.838,44.271 9.527,' +
                        '30.773 -15.87,135.251 -6.259,25.199 -9.272,35.798 ' +
                        '-16.16,50.12 -45.474004,88.055 -24.178004,128.144 ' +
                        '-51.135004,200.791 -12.399,37.63 -12.376,32.985 -16.944,' +
                        '34.925 -19.921,7.867 -32.853,21.857 -33.487,23.292 ' +
                        '-8.923,20.454 -23.3280004,27.412 -19.92100038,33.844 ' +
                        '0.89599998,1.702 3.31799998,2.588 4.94399998,1.381 ' +
                        '5.1890004,0.91 12.7380004,-4.808 16.1270004,-8.599 ' +
                        '4.102,-4.706 3.375,-7.457 11.332,-13.86 1.824,2.047 ' +
                        '-2.155,20.335 -3.12,23.398 -4.877,14.729 -26.5670004,' +
                        '49.619 -17.595,54.417 0.945,0.4 2.227,0.955 3.073,0.089 ' +
                        '1.553,-1.53 3.53,-2.604 4.841,-4.372 8.025,-10.218 ' +
                        '17.566,-34.36 24.059,-39.238 3.279,0.224 1.596,2.346 ' +
                        '-4.475,22.532 -3.673,13.084 -5.142,19.941 -5.142,19.941 ' +
                        '-10.126,30.466 6.229,25.716 11.501,6.808 0.448,-1.537 ' +
                        '9.722,-26.912 10.129,-28.16 1.241,-3.291 4.602,-17.806 ' +
                        '8.801,-14.872 0.646,2.469 -0.335,3.044 -3.536,31.521 ' +
                        '-2.6,21.813 -3.236,8.789 -2.713,26.425 0.079,2.164 ' +
                        '4.439,3.257 6.282,2.115 10.539,-9.723 12.692,-57.611 ' +
                        '18.074,-61.022 3.669,4.293 4.272,33.754 5.982,39.221 ' +
                        '2.652,9.705 7.446,4.802 7.981,3.239 3.825004,-9.324 ' +
                        '-0.19,-30.536 0.628,-45.388 0,0 4.369004,-14.53 ' +
                        '7.198004,-38.676 4.176,-45.514 -17.861004,13.267 48.59,' +
                        '-167.185 0,0 5.299,-10.218 13.794,-30.791 9.81,-21.31 ' +
                        '5.988,-35.652 19.766,-73.451 0.361,-1 16.239,-47.758 ' +
                        '24.363,-68.15 45.673,232.645 -9.743,77.068 -28.904,' +
                        '331.531 -5.708,105.042 1.862,76.707 18.19,223.544 ' +
                        '31.719,289.304 -15.087,130.161 35.652,384.312 10.99,' +
                        '51.495 9.837,44.86 11.854,56.284 2.28,21.363 -1.788,' +
                        '21.528 -1.679,31.313 -0.699,24.031 5.964,8.574 -1.712,' +
                        '52.53 -4.993,24.181 -4.913,9.214 -7.677,37.417 -3.463,' +
                        '13.977 -13.912,52.732 0.856,52.45 1.286,7.64 5.541,' +
                        '9.156 9.756,6.712 -0.684,2.455 1.381,4.293 2.766,6.011 ' +
                        '4.813,1.322 4.76,1.029 6.828,-0.555 1.495,5.791 5.173,' +
                        '5.742 6.748,6.16 4.768,1.476 5.904,-11.237 6.781,-16.16 ' +
                        '0.856,-0.046 1.705,-0.096 2.551,-0.129 -1.072,3.151 ' +
                        '-7.161,15.833 2.634,16.835 7.651,1.238 8.542,0.168 ' +
                        '12.727,-3.791 6.992,-7.01 5.41,-8.94 6.623,-20.685 ' +
                        '0.191,-2.384 5.685,-6.58 0.872,-37.642 -1.855,-15.952 ' +
                        '-0.832,2.69 0.304,-35.715 0.371,-16.594 5.685,-19.576 ' +
                        '6.408,-31.349 -6.493,-27.396 -1.465,-14.55 -4.045,' +
                        '-30.51 -6.145,-34.313 -7.105,-27.255 0.575,-107.316 ' +
                        '6.987,-65.839 14.147,-68.677 7.72,-136.864 -14.296,' +
                        '-110.15 -0.224,-68.945 1.451,-126.216 1.503,-67.36 ' +
                        '-4.198,-108.808 3.103,-168.203 4.314,-34.735 12.351,' +
                        '-68.835 12.215,-90.227 2.948,-3.639 4.984,-7.885 7.168,' +
                        '-11.993 3.172,-6.203 2.655,-0.513 2.627,-35.675 1.424,' +
                        '-0.218 2.885,-0.281 4.27,-0.677 0.162,-0.334 0.307,' +
                        '-0.661 0.436,-0.985 0.007,0.007 0.014,0.015 0.022,0.023 ' +
                        '0.008,-0.008 0.015,-0.016 0.022,-0.023 0.129,0.324 ' +
                        '0.274,0.651 0.436,0.985 1.385,0.396 2.846,0.459 4.27,' +
                        '0.677 -0.028,35.162 -0.545,29.472 2.627,35.675 2.184,' +
                        '4.108 4.22,8.354 7.168,11.993 -0.136,21.392 7.901,' +
                        '55.493 12.215,90.227 7.301,59.394 1.6,100.842 3.103,' +
                        '168.203 1.675,57.27 15.747,16.066 1.451,126.216 -6.427,' +
                        '68.186 0.733,71.025 7.72,136.864 7.68,80.061 6.72,' +
                        '73.003 0.575,107.316 -2.58,15.96 2.448,3.114 -4.045,' +
                        '30.51 0.723,11.773 6.037,14.755 6.408,31.349 1.136,' +
                        '38.405 2.159,19.763 0.304,35.715 -4.813,31.062 0.681,' +
                        '35.258 0.872,37.642 1.213,11.745 -0.369,13.675 6.623,' +
                        '20.685 4.185,3.959 5.076,5.029 12.727,3.791 9.795,' +
                        '-1.002 3.706,-13.684 2.634,-16.835 0.846,0.033 1.695,' +
                        '0.083 2.551,0.129 0.877,4.923 2.013,17.636 6.781,16.16 ' +
                        '1.575,-0.418 5.253,-0.369 6.748,-6.16 2.068,1.584 2.015,' +
                        '1.877 6.828,0.555 1.385,-1.718 3.45,-3.556 2.766,-6.011 ' +
                        '4.215,2.444 8.47,0.928 9.756,-6.712 14.768,0.282 4.319,' +
                        '-38.473 0.856,-52.45 -2.764,-28.203 -2.684,-13.236 ' +
                        '-7.677,-37.417 -7.676,-43.956 -1.013,-28.499 -1.712,' +
                        '-52.53 0.109,-9.785 -3.959,-9.95 -1.679,-31.313 2.017,' +
                        '-11.424 0.864,-4.789 11.854,-56.284 50.739,-254.151 ' +
                        '3.933,-95.007 35.652,-384.312 16.328,-146.837 23.898,' +
                        '-118.502 18.19,-223.544 -19.161,-254.463 -74.576,' +
                        '-98.886 -28.904,-331.531 8.124,20.392 24.002,67.15 ' +
                        '24.363,68.15 13.778,37.8 9.956,52.142 19.766,73.451 ' +
                        '8.495,20.573 13.794,30.791 13.794,30.791 66.451,180.451 ' +
                        '44.414,121.671 48.59,167.185 2.829,24.146 7.198,38.676 ' +
                        '7.198,38.676 0.818,14.852 -3.197,36.064 0.628,45.388 ' +
                        '0.535,1.563 5.329,6.466 7.981,-3.239 1.71,-5.467 2.313,' +
                        '-34.928 5.982,-39.221 5.382,3.411 7.535,51.3 18.074,' +
                        '61.022 1.843,1.142 6.203,0.049 6.282,-2.115 0.523,' +
                        '-17.636 -0.113,-4.612 -2.713,-26.425 -3.201,-28.477 ' +
                        '-4.182,-29.052 -3.536,-31.521 4.199,-2.934 7.56,11.581 ' +
                        '8.801,14.872 0.407,1.248 9.681,26.623 10.129,28.16 ' +
                        '5.272,18.908 21.627,23.658 11.501,-6.808 0,0 -1.469,' +
                        '-6.857 -5.142,-19.941 -6.071,-20.186 -7.754,-22.308 ' +
                        '-4.475,-22.532 6.493,4.878 16.034,29.02 24.059,39.238 ' +
                        '1.311,1.768 3.288,2.842 4.841,4.372 0.846,0.866 2.128,' +
                        '0.311 3.073,-0.089 8.972,-4.798 -12.718,-39.688 -17.595,' +
                        '-54.417 -0.965,-3.063 -4.944,-21.351 -3.12,-23.398 ' +
                        '7.957,6.403 7.23,9.154 11.332,13.86 3.389,3.791 10.938,' +
                        '9.509 16.127,8.599 1.626,1.207 4.048,0.321 4.944,-1.381 ' +
                        '3.403,-6.432 -11.002,-13.39 -19.925,-33.844 z'
                },
                {"Light Bulb": 'M480.15 0.510986V0.531986C316.002 0.531986 ' +
                        '197.223 56.655 119.105 139.78C40.987 222.905 3.50699 ' +
                        '332.801 0.884992 440.062C-1.74001 547.459 36.194 ' +
                        '644.769 79.287 725.354C122.38 805.938 170.742 870.203 ' +
                        '188.861 909.922C205.994 947.479 203.626 990.232 206.788 ' +
                        '1033.17C209.95 1076.11 219.126 1119.48 260.261 ' +
                        '1156.26C260.888 1156.83 261.679 1157.18 262.52 ' +
                        '1157.27C262.639 1157.28 262.75 1157.28 262.87 ' +
                        '1157.29L262.747 1173.69L274.021 1200.24C275.812 1214.45 ' +
                        '275.053 1222.2 273.364 1229.45C261.44 1238.59 250.866 ' +
                        '1253.57 283.323 1261.97V1283.88C249.425 1299.28 261.103 ' +
                        '1315.14 283.323 1327.03L281.331 1342.96C249.673 1354.72 ' +
                        '261.6 1377.5 282.645 1388.76V1403.36C256.094 1414.86 ' +
                        '256.771 1436.12 283.323 1451.16V1473.73L349.035 ' +
                        '1535.46L396.163 1582.58L397.498 ' +
                        '1600.51H565.433V1585.91L619.193 1535.46C631.786 1531.75 ' +
                        '660.881 1505.66 698.191 1468.41L702.729 1451.49L686.753 ' +
                        '1440.38L687.226 1426.38C714.969 1420.61 718.256 1388.06 ' +
                        '687.226 1382.78V1366.87C725.039 1359.03 715.965 1331.13 ' +
                        '690.532 1325.04V1311.77C735.92 1292.94 715.774 1272.19 ' +
                        '695.193 1267.29V1245.38C721.584 1240.94 721.209 1210.5 ' +
                        '702.688 1201.19L711.107 1183.45L711.682 1162.54C713.198 ' +
                        '1162.5 714.725 1162.46 716.241 1162.38C717.056 1162.36 ' +
                        '717.845 1162.09 718.5 1161.6C754.295 1134.83 762.81 ' +
                        '1094.37 765.299 1051.47C767.789 1008.58 764.577 962.629 ' +
                        '775.69 923.173C788.878 876.344 833.216 822.264 875.654 ' +
                        '750.885C918.093 679.505 958.46 590.459 963.133 ' +
                        '472.719C967.812 354.836 929.374 236.776 848.507 ' +
                        '148.143C767.638 59.511 644.344 0.516987 480.15 ' +
                        '0.516987V0.510986Z'},
                {"Fashion Woman": "M356.1 1.5c-18.6 4.1-26.7 8.2-36.6 18.6-11.1 11.9-16.4 20-26 39.6L285 77.1l-3 25-2.9 24.9 1.9 14.3c2.3 16.4 4 42.6 4 61V215l-10.1 18.8c-5.6 10.3-12.6 23-15.6 28.3l-5.5 9.6-12.1 3.7c-26.2 8.1-33.6 10.8-36.1 13.5-2 2.1-4.5 9.8-12.5 38.6-17.3 62.4-18.1 66.9-22.1 121-2.6 35.1-11.6 102.9-17.6 132.5-3.1 15-3.7 20.6-4.4 38.5-.5 11.5-1.8 29.1-2.9 39s-3 27.4-4.1 39c-1.1 11.5-2.5 23.7-3 27-.6 3.3-1.9 28-3.1 54.9l-2 48.8 3.6 5.5 3.7 5.5-2.1 8.5c-1.2 4.7-4.9 15.4-8.2 23.9l-6 15.4.3 16.7c.3 16.6.3 16.9 3.6 23.8 6.5 13.8 7.3 15.2 12.3 21.4 6 7.3 29.3 27.9 32.6 28.7 2.8.7 2.9 2.2.8 18.9-1.4 12.3-3.6 41.1-5.5 75-.6 10.4-2.2 38.8-3.6 63s-2.9 57.5-3.4 74c-.6 16.5-1.6 34.7-2.4 40.5-2.2 15.7-3.1 33.2-1.7 35.7.6 1.2 3 3.1 5.5 4.2 7.4 3.6 17.1 5.2 65.1 10.6 24.9 2.7 31.8 4 33.6 6.1.7.8 1.6 6.1 2.1 11.7.4 5.6 3 23.9 5.8 40.7 8.5 52.3 14.7 102.9 17 137.5.6 8.8 1.5 17.5 2.1 19.3 1.2 3.8 4.4 5.6 11.2 6.6 2.8.5 5.7 1.6 6.9 2.8 2.1 2.1 2.1 2.3 1.5 53.2-.4 28.1-1.2 59.2-1.9 69.1s-1.3 22.3-1.3 27.6c0 8.6.2 9.9 2.6 13.5 3.3 4.9 11.5 10.7 19.4 13.6 5.3 1.9 8 2.2 23 2.2 20.2 0 26.2-1.3 32.3-7.2 2.2-2 4.4-4.6 4.9-5.6 1-1.9 1.3-1.8 4.9 1.4 7.9 6.9 18.6 9.4 37.7 8.8 11.7-.3 12.5-.5 18.5-3.8 13.9-7.4 15.3-14.1 9.7-45-1.4-7.4-3.6-21.4-5-31-3.1-20.7-5.8-33.7-9.2-44-1.9-6.1-2.7-11.5-3.8-28.5-.8-11.6-1.7-23-2-25.5s-.2-5 .2-5.5c.5-.6 3.6-3.2 7.1-5.9l6.2-4.7v-8.1c0-4.4-.7-16.7-1.7-27.2-1.4-17.3-1.5-25.3-.4-83.1.7-35.2 1.5-66.7 1.8-70.1l.5-6.1 9.7-.7c5.3-.3 24.2-.6 42.1-.7s35.2-.4 38.5-.8l6-.6-.2-11.5c-.7-30.2-2.5-112-3.8-171.5-.8-36.3-2.2-97.5-3-136-3.2-151.8-3.8-166.1-9.1-213.5-3.5-31.4-7.8-59.8-13-85.4-4.6-23.1-5.2-28.4-3.1-29 .6-.2 6.2-1.8 12.2-3.6 6.1-1.8 11.7-3.4 12.5-3.7.9-.2 5.9 3.6 12 9.3 5.8 5.3 12.4 10.5 14.8 11.6 3.8 1.7 4.5 1.8 7.1.5 12.3-6.2 116.2-97.3 146-128.1l7.4-7.7-.5-6.7c-1.4-17.3-13.2-40.4-39.3-76.2-13.5-18.6-30.5-40.9-38.5-50.5-3.7-4.4-8.2-10.2-10-12.9-3.7-5.5-12.7-16.2-39.7-46.9-19-21.6-25.1-29.1-37.9-46.6-10.1-13.8-11.1-15.5-13.4-23.2-3-10.1-6.8-12.5-23-14.8-12.5-1.8-29.7-6-31-7.6-.6-.8-2-7.2-3-14.2-1.3-9-3.5-18-7.3-29.9-4.7-14.3-5.8-19.5-7.6-33.9-2.7-21-5.1-33.1-9.7-48.2-4.9-16.1-5.1-18-6.4-43.6-.6-12.5-1.7-24.7-2.4-27.1-3.3-10.8-24.2-34.9-38.4-44C410.6 8.3 399 3.1 391 1.4c-8.2-1.7-26.5-1.7-34.9.1M548.2 433c4.3 1 9.1 2.6 10.8 3.5 3.1 1.6 10.6 10.1 16.1 18.2 8.4 12.4 18.9 23.2 31.1 31.9 4.3 3.1 9.5 7.6 11.7 10.1 4.9 5.8 14.9 22.9 15.7 27 .6 3 .5 3.1-4.3 4.1-2.7.6-6 1.5-7.4 2-3.6 1.4-10.2 8.1-19.4 19.7-4.4 5.5-8.9 10.8-10 11.8-2.6 2.3-14 8.1-19 9.7-2.2.7-6.3 3-9 5.1-2.8 2-8.8 5.9-13.5 8.5-4.7 2.5-13.4 7.8-19.4 11.7-6 3.8-11.7 7.2-12.7 7.4-2.2.6-5.8-4.9-8.4-12.6-1.4-4.4-1.5-5.7-.5-7.6 1.8-3.4.7-10.2-2.2-13.2-2.3-2.5-3.9-2.6-12.3-1.1-1.8.3-2-.2-1.7-4.2.3-5.3 8.2-39.2 12.4-53.5 5.2-17.6 10.8-32.4 19.3-50.9 4.5-10 8.6-19.7 9-21.6.8-4.2 3.1-8 4.8-8 .6 0 4.7.9 8.9 2m-298 86.2c1 1.7 1.3 8.6 1.3 26.3 0 27.9.3 26.3-11 50.5-4.1 8.5-8.4 18.6-9.8 22.5-1.3 3.8-3.6 10.1-5 14-1.3 3.8-3.7 12.6-5.2 19.5s-4.2 16.7-6.1 21.8c-6.7 18.5-7.8 30.4-9.3 98.2-.8 33-1.3 41.3-2.6 45-.9 2.5-1.8 7-2.2 10.1-.3 3.2-.9 6.3-1.4 7-1.5 2.5-2.2-.1-1.2-4.4.6-2.8.6-7.3.1-12.3-1.4-12.3-1.5-64.3-.1-77.9.7-6.6 1.7-17.7 2.3-24.6.6-7 2.8-23.2 5-36 2.1-12.9 4.4-28.8 5-35.4.6-6.8 2.1-15.2 3.4-19.5 1.3-4.1 3-9.8 3.9-12.5.8-2.8 2.4-7.3 3.5-10 3.1-7.4 14.9-46.1 16.1-52.5.6-3 1.6-8.7 2.2-12.7 1.2-8.1 6-19.3 8.3-19.3.9 0 2.1 1 2.8 2.2m246.9 64.5c1.3 1.5 1.2 1.5-.8.4-2.4-1.2-2.9-2.1-1.4-2.1.5 0 1.5.7 2.2 1.7M176.9 936.1c.1 15.5-.7 23.1-2.3 22.6-2.3-.7-5-8.3-5.4-14.9-.4-7.1 1.9-20.8 4.5-26.8l1.6-3.5.8 4.5c.4 2.5.8 10.6.8 18.1m197.3 584.8c3.6 5.1 4.4 9.3 5.8 30.6.6 9.9 2 26.8 3.1 37.5 2.4 23.7 3.6 54 2.2 54-2.5 0-5.6-18.3-7.8-47-.9-11.3-1.8-21.2-2.1-22s-.9-9.2-1.4-18.6c-.6-10.3-1.7-20.7-3-26.2-1.1-5.1-2-9.9-2-10.7 0-2.7 2.4-1.6 5.2 2.4"},
                {"Man": "M0 0 C1.94326172 -0.02126953 1.94326172 -0.02126953 3.92578125 -0.04296875 C10.69212623 0.37158406 14.37835171 2.23987744 18.88671875 7.078125 C26.37069878 15.8446092 31.43921844 24.81159813 31.0546875 36.66796875 C30.40027496 41.15835268 29.02621755 45.43929613 27.66015625 49.7578125 C26.59492382 53.21363923 26.59492382 53.21363923 26.16015625 56.984375 C25.6875 60.1875 25.6875 60.1875 24.0625 62.3125 C22.41391486 64.13039588 22.41391486 64.13039588 22.89135742 66.62744141 C24.09680267 70.50364469 26.15552325 71.46959295 29.51806641 73.54980469 C36.69385972 77.25764797 44.32876684 79.96133902 51.875 82.8125 C54.46535982 83.79580802 57.05426757 84.78242618 59.63996887 85.77792358 C61.23877579 86.39308908 62.84028361 87.0012979 64.44487 87.60122681 C75.29578462 91.76544246 75.29578462 91.76544246 77.83740234 96.1887207 C78.02254395 96.88570068 78.20768555 97.58268066 78.3984375 98.30078125 C78.61983398 99.09178223 78.84123047 99.8827832 79.06933594 100.69775391 C79.27333008 101.51937012 79.47732422 102.34098633 79.6875 103.1875 C79.89922852 103.97946777 80.11095703 104.77143555 80.32910156 105.58740234 C81.01219104 108.17809389 81.66323756 110.77563556 82.3125 113.375 C85.06612123 124.19747612 88.23207624 134.87681517 91.52783203 145.54370117 C96.93966981 163.21260088 98.93425328 179.62327471 99 198.0625 C99.00295074 198.80350952 99.00590149 199.54451904 99.00894165 200.3079834 C99.02495989 218.36029668 97.12130832 236.16244539 94.94390869 254.06298828 C94.55814535 257.25928688 94.19334934 260.45799401 93.82421875 263.65625 C93.57283855 265.75030478 93.31915926 267.84408569 93.0625 269.9375 C92.95188232 270.85950195 92.84126465 271.78150391 92.72729492 272.73144531 C92.61877197 273.55741211 92.51024902 274.38337891 92.3984375 275.234375 C92.30868652 275.93401367 92.21893555 276.63365234 92.12646484 277.35449219 C91.6875 279.1875 91.6875 279.1875 89.6875 282.1875 C89.49155086 284.23715961 89.49155086 284.23715961 89.5 286.4375 C88.98541926 292.20080432 85.91055347 294.59207655 81.6875 298.1875 C80.800625 299.115625 79.91375 300.04375 79 301 C76.8929706 302.99313592 75.27120878 303.98539549 72.6875 305.1875 C72.55210901 357.62043994 72.55210901 357.62043994 83.41772461 408.42358398 C87.70766007 421.13997219 88.13112111 433.56441623 88.2270813 446.8678894 C88.26596047 452.07516171 88.35040161 457.28162252 88.4375 462.48828125 C88.45402115 463.50551773 88.4705423 464.52275421 88.48756409 465.57081604 C88.67650419 475.80797718 89.37370877 485.95449911 90.28515625 496.15234375 C90.67288838 500.51904369 90.7651111 504.80505982 90.6875 509.1875 C90.0275 509.5175 89.3675 509.8475 88.6875 510.1875 C89.29094284 513.50643565 90.43787489 515.40499769 92.5625 518 C96.11337473 522.60077279 98.33496957 526.56870252 99.125 532.4375 C98.6875 535.1875 98.6875 535.1875 96.9375 537 C91.87869419 539.66992529 86.77682311 539.37912953 81.1875 539.375 C80.29708008 539.37564453 79.40666016 539.37628906 78.48925781 539.37695312 C71.70263908 539.32279802 65.32031101 538.6974082 58.6875 537.1875 C56.61151373 531.55638723 55.94439086 526.07004067 55.25 520.13671875 C55.064375 519.16347656 54.87875 518.19023438 54.6875 517.1875 C54.0275 516.8575 53.3675 516.5275 52.6875 516.1875 C52.00570723 513.21404254 51.45921863 510.32182948 51 507.3125 C50.86190918 506.44858643 50.72381836 505.58467285 50.58154297 504.69458008 C49.75612241 499.07107309 49.57565594 494.10536706 50.8515625 488.51171875 C50.91418927 485.87453551 50.91418927 485.87453551 48.21875 483.609375 C44.90560082 479.96305674 45.25202835 476.56904005 45.39453125 471.82617188 C45.44996094 470.81103516 45.50539063 469.79589844 45.5625 468.75 C46.08223775 460.24072337 46.08223775 460.24072337 43.45361328 452.27709961 C41.27468626 446.33400324 41.51410424 439.43640744 41.03076172 433.1484375 C40.45146062 425.8070804 39.72003554 419.93683552 36.6875 413.1875 C35.83747677 408.79958411 35.33799134 404.37440432 34.8125 399.9375 C34.55837689 397.9334096 34.30420483 395.92932465 34.04794312 393.92550659 C33.77690302 391.80187841 33.50941199 389.6778223 33.2421875 387.55371094 C32.31420707 380.21665996 31.33457583 372.88702305 30.3125 365.5625 C30.21105682 364.83465302 30.10961365 364.10680603 30.00509644 363.35690308 C27.95229003 348.79691044 25.02114753 334.50855976 21.6875 320.1875 C21.58991403 329.1169044 21.8571466 337.96804299 22.421875 346.87890625 C22.54082123 348.77780861 22.54082123 348.77780861 22.66217041 350.71507263 C22.83129866 353.37835084 23.0025551 356.04140383 23.17675781 358.7043457 C23.35161464 361.38847893 23.51809983 364.07291787 23.67675781 366.75805664 C24.57775254 381.86269559 25.89327744 396.44717074 29.25701904 411.20913696 C30.24792979 415.76306939 30.82425036 420.37597157 31.375 425 C31.49673584 425.98282959 31.61847168 426.96565918 31.74389648 427.97827148 C32.69933946 436.1755157 33.13847369 444.36506917 33.30932617 452.61450195 C33.40983976 456.51760347 33.56679848 459.78825652 34.703125 463.546875 C36.17112102 468.97613011 35.93852358 474.27786685 35.875 479.875 C35.86710449 481.06367676 35.85920898 482.25235352 35.85107422 483.47705078 C35.78085318 490.84234783 35.62761854 498.20347333 35.3125 505.5625 C35.2818042 506.36905029 35.2511084 507.17560059 35.21948242 508.0065918 C35.00228024 512.18200021 34.29413686 515.36333773 32.6875 519.1875 C32.27257313 521.78011493 31.9136348 524.33225722 31.625 526.9375 C30.81329702 534.06170298 30.81329702 534.06170298 29.6875 535.1875 C28.00141034 535.25955511 26.31249341 535.27136068 24.625 535.25 C23.70589844 535.24097656 22.78679687 535.23195313 21.83984375 535.22265625 C21.12957031 535.21105469 20.41929688 535.19945312 19.6875 535.1875 C19.0275 536.5075 18.3675 537.8275 17.6875 539.1875 C-6.41209701 539.39993523 -6.41209701 539.39993523 -13.3125 538.1875 C-14.3125 537.1875 -14.3125 537.1875 -14.625 533.5 C-14.51330644 527.22282185 -10.94166151 523.74528017 -6.6875 519.5 C-6.09710938 518.93925781 -5.50671875 518.37851562 -4.8984375 517.80078125 C-2.47757787 515.33818266 -1.35813501 513.72371138 -1.0625 510.25 C-1.09840852 507.28323484 -1.09840852 507.28323484 -2.3269043 505.30639648 C-3.5236399 502.73357798 -3.47089038 501.04559631 -3.33203125 498.22265625 C-3.29972412 497.26439941 -3.26741699 496.30614258 -3.23413086 495.31884766 C-3.19811768 494.30612793 -3.16210449 493.2934082 -3.125 492.25 C-2.95670275 483.98103789 -3.57578584 477.92280846 -7.14453125 470.35546875 C-8.84867438 465.73319423 -8.86523917 461.29218825 -8.99755859 456.40820312 C-9.13340928 452.12649776 -9.62098831 448.44438184 -10.875 444.3125 C-12.67535606 438.09780936 -12.50873687 432.09444558 -12.28930664 425.68408203 C-12.26731201 424.90145996 -12.24531738 424.11883789 -12.22265625 423.3125 C-12.19308838 422.61382812 -12.16352051 421.91515625 -12.13305664 421.1953125 C-12.18119674 419.15670041 -12.18119674 419.15670041 -13.25024414 417.4621582 C-14.85834842 414.01864921 -15.01667207 410.40635942 -15.3984375 406.66796875 C-15.60157655 404.867149 -15.80658655 403.0665396 -16.01318359 401.26611328 C-16.12200867 400.30771545 -16.23083374 399.34931763 -16.34295654 398.36187744 C-19.63022619 369.86424865 -25.79702197 342.09654178 -32.3125 314.1875 C-36.13674653 314.1875 -39.00328147 316.92466425 -41.8125 319.3125 C-45.67721507 322.2110363 -48.00320471 322.35413758 -52.75 321.75 C-57.55522756 319.64244405 -59.79624883 316.7424112 -62.3125 312.1875 C-63.16189754 309.01541361 -63.28592651 305.97673651 -63.3359375 302.703125 C-63.3718399 301.80744812 -63.40774231 300.91177124 -63.44473267 299.98895264 C-63.5521805 297.13866306 -63.62014965 294.28898767 -63.6875 291.4375 C-63.75399144 289.57152312 -63.82298371 287.7056336 -63.89453125 285.83984375 C-64.3046075 274.43191607 -64.38425315 263.03012323 -64.32141113 251.61608887 C-64.31267944 249.23640292 -64.31858901 246.85721096 -64.32910156 244.47753906 C-64.42594496 216.06258883 -62.51387554 187.86179083 -60.17421341 159.56152344 C-59.93794823 156.69294207 -59.70579009 153.8240512 -59.47433472 150.95507812 C-59.10373968 146.38242789 -58.71916321 141.81115525 -58.32340431 137.24061584 C-58.17714636 135.53677093 -58.03443335 133.83261748 -57.89551353 132.12815857 C-57.70151077 129.76594634 -57.49263402 127.40550089 -57.27978516 125.04492188 C-57.20013724 124.0228363 -57.20013724 124.0228363 -57.11888027 122.98010254 C-56.14976414 112.77679253 -51.99728131 106.68669093 -44.3125 100.1875 C-40.32809742 97.10946743 -36.19510811 94.24435135 -32.04931641 91.38964844 C-29.38293113 89.54409304 -26.75259962 87.65022436 -24.125 85.75 C-23.26519531 85.13253906 -22.40539063 84.51507813 -21.51953125 83.87890625 C-17.3207535 80.79700831 -17.3207535 80.79700831 -15.8125 76 C-16.28865184 72.36934219 -16.54543536 71.53695022 -18.5 68.75 C-24.12070545 60.55113621 -27.06597931 49.03189275 -27.3125 39.1875 C-27.36277344 38.07503906 -27.41304687 36.96257813 -27.46484375 35.81640625 C-27.64656811 28.9472254 -27.58661308 23.29094098 -24.3125 17.1875 C-23.69181641 15.95386719 -23.69181641 15.95386719 -23.05859375 14.6953125 C-17.65892125 4.77874774 -11.38595958 0.05631038 0 0 Z "}
            ]

        },
        "y_axis_max": {
            "type": "number",
            "section": "Plot",
            "label": "Y-axis Max",
        },
        "stacking_type": {
            "type": "string",
            "label": "Stacking Type",
            "default": "Percent",
            "section": "Plot",
            "display":"select",
            "order": 1,
            "values": [
                {"Normal": "normal"},
                {"Percent": "percent"}
            ]
        },
        "colors": {
            "type": "array",
            "label": "Colors",
            "section": "Style",
            "order": 2,
            "display": "colors"
        },
        "legend_align": {
            "type": "string",
            "label": "Legend Align",
            "default": "Left",
            "section": "Legend",
            "display":"select",
            "order": 3,
            "values": [
                {"Left": "left"},
                {"Center": "center"},
                {"Right": "right"},
            ]
        },
        "legend_vertical_align": {
            "type": "string",
            "label": "Legend Vertical Align",
            "default": "Top",
            "section": "Legend",
            "display":"select",
            "order": 4,
            "values": [
                {"Top": "top"},
                {"Bottom": "bottom"},
                {"Middle": "middle"},
            ]
        },
        "label_align": {
            "type": "string",
            "label": "Data Label Align",
            "default": "Right",
            "section": "Plot",
            "display":"select",
            "order": 3,
            "values": [
                {"Left": "left"},
                {"Center": "center"},
                {"Right": "right"}
            ]
        },
        "data_label_format": {
            "type": "string",
            "label": "Custom Data Label Format",
            "default": "",
            "section": "Plot",
            "order": 5,
            "placeholder": "See https://www.highcharts.com/docs/chart-concepts/labels-and-string-formatting"
        },
        "data_label_unit": { // Add the new dropdown option
            "type": "string",
            "label": "Data Label Unit",
            "default": "Number",
            "section": "Plot",
            "order": 7, // Adjust the order as needed
            "display": "select",
            "values": [
                {"Number": "number"},
                {"Percent": "percent"},
                {"Thousands (K)": "thousands"},
                {"Millions (M)": "millions"},
                // ... add more units like billions, etc.
            ]
        },
        "legend_layout": {
            "type": "string",
            "label": "Legend Layout",
            "default": "Vertical",
            "section": "Legend",
            "display": "select",
            "order": 4,
            "values": [
                {"Horizontal": "horizontal"},
                {"Vertical": "vertical"}
            ]
        }},

    create: function(element, config) {
    element.innerHTML = '<div id="chart"></div>';
},

    updateAsync: function(data, element, config, queryResponse, details) {

        console.log(queryResponse)

        function formatValue(value, unit) {
            switch (unit) {
                case "percent":
                    return Highcharts.numberFormat(value * 100, 1) + '%';
                case "thousands":
                    return Highcharts.numberFormat(value / 1000, 1) + 'K';
                case "millions":
                    return Highcharts.numberFormat(value / 1000000, 1) + 'M';
                // ... add more cases for billions, etc.
                default: // Number format with commas
                    return Highcharts.numberFormat(value, 0, '.', ',');
            }
        }

        const chartData = data.reduce((acc, row) => {
            const dimensionValue = row[queryResponse.fields.dimensions[0].name]?.value;
            let measureValue; // Declare measureValue outside of the try...catch block

            try {
                measureValue = row[queryResponse.fields.measures[0].name].value;
            } catch (error) {
                measureValue = row[queryResponse.fields.table_calculations[0].name].value || 0;
            }
            // Check if dimension value is valid and not undefined
            if (dimensionValue !== undefined) {
                acc.push({
                    name: dimensionValue,
                    data: [measureValue]
                });
            }
            return acc;
        }, []);

        console.log(chartData)

    Highcharts.chart('chart', {
    chart: { type: 'pictorial' },
    title: {
        text: config.title|| '',
        floating: false

    },
        xAxis: {
            visible: false,
            min: 0.2
        },

        yAxis: {
            visible: false,
            max: config.y_axis_max || null
        },

        colors:  config.colors || ['#B0FDFE', '#E3FED4', '#F9F492', '#FAF269', '#FAE146', '#FDA003'], // Use color collection or fall back

        legend: {
            align: config.legend_align || 'right',
            verticalAlign: config.legend_vertical_align || 'top',
            floating: true,
            itemMarginTop: 5,
            itemMarginBottom: 5,
            layout: config.legend_layout || 'vertical',
            margin: 0,
            padding: 0,
        },

        tooltip: {
            formatter: function() {
                let value = this.y;
                let formattedValue = formatValue(value, config.data_label_unit);
                return formattedValue;
            }
        },

        plotOptions: {
            series: {
                pointPadding: 0,
                groupPadding: 0,
                borderWidth: 0,
                dataLabels: {
                    enabled: true,
                    align: config.label_align || 'center',
                    formatter: function() {
                        let value = this.y;
                        let formattedValue = formatValue(value, config.data_label_unit);
                        return formattedValue;
                    }
                },
                stacking: config.stacking_type || 'percent',
                paths: [{
                    definition: config.image || "M356.1 1.5c-18.6 4.1-26.7 8.2-36.6 18.6-11.1 11.9-16.4 20-26 39.6L285 77.1l-3 25-2.9 24.9 1.9 14.3c2.3 16.4 4 42.6 4 61V215l-10.1 18.8c-5.6 10.3-12.6 23-15.6 28.3l-5.5 9.6-12.1 3.7c-26.2 8.1-33.6 10.8-36.1 13.5-2 2.1-4.5 9.8-12.5 38.6-17.3 62.4-18.1 66.9-22.1 121-2.6 35.1-11.6 102.9-17.6 132.5-3.1 15-3.7 20.6-4.4 38.5-.5 11.5-1.8 29.1-2.9 39s-3 27.4-4.1 39c-1.1 11.5-2.5 23.7-3 27-.6 3.3-1.9 28-3.1 54.9l-2 48.8 3.6 5.5 3.7 5.5-2.1 8.5c-1.2 4.7-4.9 15.4-8.2 23.9l-6 15.4.3 16.7c.3 16.6.3 16.9 3.6 23.8 6.5 13.8 7.3 15.2 12.3 21.4 6 7.3 29.3 27.9 32.6 28.7 2.8.7 2.9 2.2.8 18.9-1.4 12.3-3.6 41.1-5.5 75-.6 10.4-2.2 38.8-3.6 63s-2.9 57.5-3.4 74c-.6 16.5-1.6 34.7-2.4 40.5-2.2 15.7-3.1 33.2-1.7 35.7.6 1.2 3 3.1 5.5 4.2 7.4 3.6 17.1 5.2 65.1 10.6 24.9 2.7 31.8 4 33.6 6.1.7.8 1.6 6.1 2.1 11.7.4 5.6 3 23.9 5.8 40.7 8.5 52.3 14.7 102.9 17 137.5.6 8.8 1.5 17.5 2.1 19.3 1.2 3.8 4.4 5.6 11.2 6.6 2.8.5 5.7 1.6 6.9 2.8 2.1 2.1 2.1 2.3 1.5 53.2-.4 28.1-1.2 59.2-1.9 69.1s-1.3 22.3-1.3 27.6c0 8.6.2 9.9 2.6 13.5 3.3 4.9 11.5 10.7 19.4 13.6 5.3 1.9 8 2.2 23 2.2 20.2 0 26.2-1.3 32.3-7.2 2.2-2 4.4-4.6 4.9-5.6 1-1.9 1.3-1.8 4.9 1.4 7.9 6.9 18.6 9.4 37.7 8.8 11.7-.3 12.5-.5 18.5-3.8 13.9-7.4 15.3-14.1 9.7-45-1.4-7.4-3.6-21.4-5-31-3.1-20.7-5.8-33.7-9.2-44-1.9-6.1-2.7-11.5-3.8-28.5-.8-11.6-1.7-23-2-25.5s-.2-5 .2-5.5c.5-.6 3.6-3.2 7.1-5.9l6.2-4.7v-8.1c0-4.4-.7-16.7-1.7-27.2-1.4-17.3-1.5-25.3-.4-83.1.7-35.2 1.5-66.7 1.8-70.1l.5-6.1 9.7-.7c5.3-.3 24.2-.6 42.1-.7s35.2-.4 38.5-.8l6-.6-.2-11.5c-.7-30.2-2.5-112-3.8-171.5-.8-36.3-2.2-97.5-3-136-3.2-151.8-3.8-166.1-9.1-213.5-3.5-31.4-7.8-59.8-13-85.4-4.6-23.1-5.2-28.4-3.1-29 .6-.2 6.2-1.8 12.2-3.6 6.1-1.8 11.7-3.4 12.5-3.7.9-.2 5.9 3.6 12 9.3 5.8 5.3 12.4 10.5 14.8 11.6 3.8 1.7 4.5 1.8 7.1.5 12.3-6.2 116.2-97.3 146-128.1l7.4-7.7-.5-6.7c-1.4-17.3-13.2-40.4-39.3-76.2-13.5-18.6-30.5-40.9-38.5-50.5-3.7-4.4-8.2-10.2-10-12.9-3.7-5.5-12.7-16.2-39.7-46.9-19-21.6-25.1-29.1-37.9-46.6-10.1-13.8-11.1-15.5-13.4-23.2-3-10.1-6.8-12.5-23-14.8-12.5-1.8-29.7-6-31-7.6-.6-.8-2-7.2-3-14.2-1.3-9-3.5-18-7.3-29.9-4.7-14.3-5.8-19.5-7.6-33.9-2.7-21-5.1-33.1-9.7-48.2-4.9-16.1-5.1-18-6.4-43.6-.6-12.5-1.7-24.7-2.4-27.1-3.3-10.8-24.2-34.9-38.4-44C410.6 8.3 399 3.1 391 1.4c-8.2-1.7-26.5-1.7-34.9.1M548.2 433c4.3 1 9.1 2.6 10.8 3.5 3.1 1.6 10.6 10.1 16.1 18.2 8.4 12.4 18.9 23.2 31.1 31.9 4.3 3.1 9.5 7.6 11.7 10.1 4.9 5.8 14.9 22.9 15.7 27 .6 3 .5 3.1-4.3 4.1-2.7.6-6 1.5-7.4 2-3.6 1.4-10.2 8.1-19.4 19.7-4.4 5.5-8.9 10.8-10 11.8-2.6 2.3-14 8.1-19 9.7-2.2.7-6.3 3-9 5.1-2.8 2-8.8 5.9-13.5 8.5-4.7 2.5-13.4 7.8-19.4 11.7-6 3.8-11.7 7.2-12.7 7.4-2.2.6-5.8-4.9-8.4-12.6-1.4-4.4-1.5-5.7-.5-7.6 1.8-3.4.7-10.2-2.2-13.2-2.3-2.5-3.9-2.6-12.3-1.1-1.8.3-2-.2-1.7-4.2.3-5.3 8.2-39.2 12.4-53.5 5.2-17.6 10.8-32.4 19.3-50.9 4.5-10 8.6-19.7 9-21.6.8-4.2 3.1-8 4.8-8 .6 0 4.7.9 8.9 2m-298 86.2c1 1.7 1.3 8.6 1.3 26.3 0 27.9.3 26.3-11 50.5-4.1 8.5-8.4 18.6-9.8 22.5-1.3 3.8-3.6 10.1-5 14-1.3 3.8-3.7 12.6-5.2 19.5s-4.2 16.7-6.1 21.8c-6.7 18.5-7.8 30.4-9.3 98.2-.8 33-1.3 41.3-2.6 45-.9 2.5-1.8 7-2.2 10.1-.3 3.2-.9 6.3-1.4 7-1.5 2.5-2.2-.1-1.2-4.4.6-2.8.6-7.3.1-12.3-1.4-12.3-1.5-64.3-.1-77.9.7-6.6 1.7-17.7 2.3-24.6.6-7 2.8-23.2 5-36 2.1-12.9 4.4-28.8 5-35.4.6-6.8 2.1-15.2 3.4-19.5 1.3-4.1 3-9.8 3.9-12.5.8-2.8 2.4-7.3 3.5-10 3.1-7.4 14.9-46.1 16.1-52.5.6-3 1.6-8.7 2.2-12.7 1.2-8.1 6-19.3 8.3-19.3.9 0 2.1 1 2.8 2.2m246.9 64.5c1.3 1.5 1.2 1.5-.8.4-2.4-1.2-2.9-2.1-1.4-2.1.5 0 1.5.7 2.2 1.7M176.9 936.1c.1 15.5-.7 23.1-2.3 22.6-2.3-.7-5-8.3-5.4-14.9-.4-7.1 1.9-20.8 4.5-26.8l1.6-3.5.8 4.5c.4 2.5.8 10.6.8 18.1m197.3 584.8c3.6 5.1 4.4 9.3 5.8 30.6.6 9.9 2 26.8 3.1 37.5 2.4 23.7 3.6 54 2.2 54-2.5 0-5.6-18.3-7.8-47-.9-11.3-1.8-21.2-2.1-22s-.9-9.2-1.4-18.6c-.6-10.3-1.7-20.7-3-26.2-1.1-5.1-2-9.9-2-10.7 0-2.7 2.4-1.6 5.2 2.4"
                }]
            },
            }
        ,
    series: chartData,


});
    // Load SVG of a person (replace with your actual SVG)
    Highcharts.setOptions({
    lang: {
        noData: "No data available"
    }
});


}


});
